2025-05-29 20:06:28.174 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-05-29 20:06:28.214 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-05-29 20:06:28.288 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-05-29 20:06:28.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-05-29 20:06:28.306 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-05-29 20:06:28.317 +07:00 [INF] Applying migration '20250529130617_InitialCreate'.
2025-05-29 20:06:28.347 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "InventoryItems" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "ProductId" integer NOT NULL,
    "SKU" character varying(50) NOT NULL,
    "Quantity" integer NOT NULL,
    "ReservedQuantity" integer NOT NULL,
    "MinimumStock" integer NOT NULL,
    "MaximumStock" integer NOT NULL,
    "Location" character varying(100) NOT NULL,
    "LastUpdated" timestamp with time zone NOT NULL DEFAULT (CURRENT_TIMESTAMP),
    "CreatedAt" timestamp with time zone NOT NULL DEFAULT (CURRENT_TIMESTAMP),
    CONSTRAINT "PK_InventoryItems" PRIMARY KEY ("Id")
);
2025-05-29 20:06:28.353 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "StockMovements" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "InventoryItemId" integer NOT NULL,
    "MovementType" character varying(20) NOT NULL,
    "Quantity" integer NOT NULL,
    "PreviousQuantity" integer NOT NULL,
    "NewQuantity" integer NOT NULL,
    "Reason" character varying(200),
    "Reference" character varying(50),
    "CreatedAt" timestamp with time zone NOT NULL DEFAULT (CURRENT_TIMESTAMP),
    "CreatedBy" character varying(100) NOT NULL,
    CONSTRAINT "PK_StockMovements" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_StockMovements_InventoryItems_InventoryItemId" FOREIGN KEY ("InventoryItemId") REFERENCES "InventoryItems" ("Id") ON DELETE CASCADE
);
2025-05-29 20:06:28.356 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "InventoryItems" ("Id", "CreatedAt", "LastUpdated", "Location", "MaximumStock", "MinimumStock", "ProductId", "Quantity", "ReservedQuantity", "SKU")
VALUES (1, TIMESTAMPTZ '2025-05-29T13:06:16.933484Z', TIMESTAMPTZ '2025-05-29T13:06:16.933484Z', 'A1-B2-C3', 500, 10, 1, 100, 0, 'SAMPLE-001');
2025-05-29 20:06:28.358 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "StockMovements" ("Id", "CreatedAt", "CreatedBy", "InventoryItemId", "MovementType", "NewQuantity", "PreviousQuantity", "Quantity", "Reason", "Reference")
VALUES (1, TIMESTAMPTZ '2025-05-29T13:06:16.933495Z', 'System', 1, 'IN', 100, 0, 100, 'Initial stock', 'INIT-001');
2025-05-29 20:06:28.363 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_InventoryItems_Location" ON "InventoryItems" ("Location");
2025-05-29 20:06:28.368 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_InventoryItems_ProductId" ON "InventoryItems" ("ProductId");
2025-05-29 20:06:28.373 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_InventoryItems_SKU" ON "InventoryItems" ("SKU");
2025-05-29 20:06:28.378 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_StockMovements_CreatedAt" ON "StockMovements" ("CreatedAt");
2025-05-29 20:06:28.382 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_StockMovements_InventoryItemId" ON "StockMovements" ("InventoryItemId");
2025-05-29 20:06:28.387 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_StockMovements_MovementType" ON "StockMovements" ("MovementType");
2025-05-29 20:06:28.392 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_StockMovements_Reference" ON "StockMovements" ("Reference");
2025-05-29 20:06:28.396 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('"InventoryItems"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "InventoryItems") + 1,
        nextval(pg_get_serial_sequence('"InventoryItems"', 'Id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('"StockMovements"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "StockMovements") + 1,
        nextval(pg_get_serial_sequence('"StockMovements"', 'Id'))),
    false);
2025-05-29 20:06:28.399 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250529130617_InitialCreate', '8.0.0');
2025-05-29 20:42:29.784 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-05-29 20:42:29.823 +07:00 [INF] User profile is available. Using 'C:\Users\ndvin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 20:42:29.851 +07:00 [INF] Now listening on: http://localhost:5002
2025-05-29 20:42:29.853 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 20:42:29.854 +07:00 [INF] Hosting environment: Production
2025-05-29 20:42:29.854 +07:00 [INF] Content root path: C:\Project\Warehouse_management\services\inventory-service
2025-05-29 20:42:54.321 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5002/swagger - null null
2025-05-29 20:42:54.356 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5002/swagger - 404 0 null 35.9954ms
2025-05-29 20:42:54.363 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5002/swagger, Response status code: 404
2025-05-29 21:20:20.916 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-05-29 21:20:20.956 +07:00 [INF] User profile is available. Using 'C:\Users\ndvin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-29 21:20:20.987 +07:00 [INF] Now listening on: http://localhost:5002
2025-05-29 21:20:20.988 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-29 21:20:20.988 +07:00 [INF] Hosting environment: Production
2025-05-29 21:20:20.988 +07:00 [INF] Content root path: C:\Project\Warehouse_management\services\inventory-service
